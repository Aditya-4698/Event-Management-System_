<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign up</title>

  <!-- Icons & jQuery -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="../assets/js/jqueryy.js"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: Arial, Helvetica, sans-serif;
    }

    body {
      height: 100vh;
      width: 100%;
      background: url(https://images.unsplash.com/photo-1653821355736-0c2598d0a63e?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8ZXZlbnQlMjBtYW5hZ2VtZW50fGVufDB8fDB8fHww) no-repeat center center/cover;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      background-attachment: fixed;
      overflow-x: hidden;
    }

    .head {
      width: 100%;
      max-width: 1200px;
      padding: 10px 20px;
      display: flex;
      align-items: center;
      gap: 15px;
      margin-left: -12%;
    }

    .head img {
      width: 180px;
      height: 90px;
    }

    .t2 {
      width: 100%;
      max-width: 450px;
      margin-top: 30px;
      padding: 20px;
      border-radius: 20px;
      backdrop-filter: blur(4px);
      border: 1px solid white;
    }

    .t2 h2 {
      text-align: center;
      color: white;
      font-size: 40px;
      margin-bottom: 10px;
    }

    .t2 hr {
      border: 0;
      height: 2px;
      background: linear-gradient(to right, transparent, rgb(219, 35, 219), transparent);
      margin-bottom: 15px;
    }

    .form-group {
      position: relative;
      margin-bottom: 20px;
    }

    .form-group i {
      position: absolute;
      top: 50%;
      left: 15px;
      transform: translateY(-50%);
      color: #34558d;
    }

    input[type="text"],
    input[type="password"] {
      width: 100%;
      height: 45px;
      padding-left: 45px;
      border: none;
      outline: none;
      border-top-left-radius: 8px;
      border-bottom-right-radius: 8px;
      background-color: gainsboro;
      box-shadow: 0px 0px 20px purple;
      font-size: 15px;
    }

    .terms {
      display: flex;
      align-items: center;
      font-size: 14px;
      color: mediumspringgreen;
      gap: 10px;
      margin-bottom: 15px;
    }

    .btn-container {
      display: flex;
      justify-content: center;
    }

    input[type="button"] {
      height: 45px;
      width: 150px;
      border: none;
      cursor: pointer;
      border-top-left-radius: 10px;
      border-bottom-right-radius: 10px;
      background-color: rgb(4, 151, 196);
      color: white;
      font-size: 16px;
      transition: background-color 0.3s ease;
    }

    input[type="button"]:hover {
      background-color: rgb(16, 96, 116);
    }

    .login-link {
      text-align: center;
      margin-top: 15px;
      font-size: 14px;
      color: rgb(7, 243, 152);
    }

    .login-link span {
      color: rgb(232, 228, 232);
      cursor: pointer;
    }

    .foot {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 15px;
    }

    .foot a {
      font-size: 25px;
      color: white;
    }
  </style>
</head>

<body>
  <!-- Header -->
  <div class="head">
    <img src="../assets/img/brand/logo.PNG" alt="Logo">
  </div>

  <!-- Signup Form -->
  <div class="t2">
    <h2>Sign up</h2>
    <hr>

    <div class="form-group">
      <i class="fa-solid fa-user fa-lg"></i>
      <input type="text" id="name" placeholder="Username">
    </div>

    <div class="form-group">
      <i class="fa-solid fa-envelope-open fa-lg"></i>
      <input type="text" id="email" placeholder="Email">
    </div>

    <div class="form-group">
      <i class="fa-solid fa-lock fa-lg"></i>
      <input type="password" id="password" placeholder="Password">
    </div>

    <div class="form-group">
      <i class="fa-solid fa-lock fa-lg"></i>
      <input type="password" id="Confirm" placeholder="Confirm Password">
    </div>

    <div class="terms">
      <input type="checkbox" id="terms">
      <label for="terms">I read and agree to <span>Terms & Conditions</span></label>
    </div>

    <div class="btn-container">
      <input type="button" id="submit" value="Sign up">
    </div>

    <div class="login-link">
      Already have an account?
      <a href="../examples/login.html"><span style="font-size: 17px; color: white;">Login</span></a>
    </div>

    <div class="foot">
      <a href="#"><i class="bi bi-google"></i></a>
      <a href="#"><i class="bi bi-facebook"></i></a>
      <a href="#"><i class="bi bi-envelope-at"></i></a>
    </div>
  </div>

  <!-- JS Section -->

  <!-- <script>
    $(document).ready(function () {

      // ✅ PASSWORD VALIDATION (on blur)
      const passwordField = "#password";
      const confirmField = "#Confirm";

      $(passwordField).on("blur", function () {
        const $this = $(this);
        const value = $this.val().trim();
        const errorSpan = $this.next("span");
        errorSpan.text("");

        const passwordPattern =
          /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?#&_])[A-Za-z\d@$!%*?#&_]{8,}$/;

        if (value === "") {
          errorSpan.text("*Password is required!").css("color", "red");
          $this.css("border", "1px solid red");
        } else if (!passwordPattern.test(value)) {
          errorSpan
            .html(
              "*Password must have:<br>- At least 8 characters<br>- One uppercase letter<br>- One lowercase letter<br>- One number<br>- One special character"
            )
            .css("color", "red");
          $this.css("border", "1px solid red");
        } else {
          errorSpan.text("Looks good ✓").css("color", "limegreen");
          $this.css("border", "1px solid green");
        }
      });

      // ✅ Confirm password check
      $(confirmField).on("blur", function () {
        const confirm = $(this).val().trim();
        const password = $(passwordField).val().trim();
        const errorSpan = $(this).next("span");
        errorSpan.text("");

        if (confirm === "") {
          errorSpan.text("*Please confirm your password!").css("color", "red");
          $(this).css("border", "1px solid red");
        } else if (confirm !== password) {
          errorSpan.text("*Passwords do not match!").css("color", "red");
          $(this).css("border", "1px solid red");
        } else {
          errorSpan.text("Matched ✓").css("color", "limegreen");
          $(this).css("border", "1px solid green");
        }
      });

      $(passwordField + "," + confirmField).on("focus", function () {
        $(this).css("border", "1px solid black");
        $(this).next("span").text("");
      });

      // ✅ SIGNUP BUTTON AJAX
      $("#submit").on("click", function (e) {
        e.preventDefault();

        const name = $("#name").val().trim();
        const email = $("#email").val().trim();
        const password = $("#password").val().trim();
        const confirm = $("#Confirm").val().trim();
        const terms = $("#terms").is(":checked");

        const emailPattern =
          /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;

        if (!name || !email || !password || !confirm) {
          Swal.fire("Missing Fields", "All fields are required!", "warning");
          return;
        }
        if (!emailPattern.test(email)) {
          Swal.fire("Invalid Email", "Please enter a valid email address.", "error");
          return;
        }
        if (password.length < 8) {
          Swal.fire(
            "Weak Password",
            "Password must be at least 8 characters long.",
            "error"
          );
          return;
        }
        if (password !== confirm) {
          Swal.fire("Mismatch", "Passwords do not match!", "error");
          return;
        }
        if (!terms) {
          Swal.fire("Terms Required", "You must agree to the Terms & Conditions.", "warning");
          return;
        }

        // ✅ AJAX to Python backend
        $.ajax({
          url: "signup.py",
          method: "POST",
          data: { name, email, password },
          success: function (res) {
            console.log("Server:", res);
            if (res.includes("redirect")) {
              Swal.fire({
                icon: "success",
                title: "Sign-up Successful!",
                text: "Redirecting to your profile...",
                showConfirmButton: false,
                timer: 2000,
              });
              setTimeout(() => (window.location.href = "profile.html"), 2000);
            } else if (res.includes("exists")) {
              Swal.fire("Oops!", "This email is already registered!", "error");
            } else {
              Swal.fire("Error", res, "error");
            }
          },
          error: function () {
            Swal.fire("Server Error", "Backend not responding!", "error");
          },
        });
      });
    });
    // $(document).ready(function () {
    //   $("#submit").on("click", function (e) {
    //     e.preventDefault();

        const name = $("#name").val().trim();
        const email = $("#email").val().trim();
        const password = $("#password").val().trim();
        const confirm = $("#Confirm").val().trim();
        const terms = $("#terms").is(":checked");

        if (!name || !email || !password || !confirm) {
          Swal.fire("Missing Fields", "All fields are required!", "warning");
          return;
        }
        if (password !== confirm) {
          Swal.fire("Mismatch", "Passwords do not match!", "error");
          return;
        }
        if (!terms) {
          Swal.fire("Terms Required", "You must agree to the Terms & Conditions.", "warning");
          return;
        }

        // ✅ Store user data locally after validation
         var userData = {
        name: $("#name").val(),
        email: $("#email").val(),
        password: $("#password").val()
    };

    // Save in localStorage
    localStorage.setItem("userProfile", JSON.stringify(userData));

   Swal.fire({
          icon: "success",
          title: "Sign-up Successful!",
          text: "Redirecting to your profile...",
          showConfirmButton: false,
          timer: 2000,
        });
    window.location.href = "profile.html"; // redirect to profile
        
        

      // });
    // });
  </script> -->
<script>
$(document).ready(function () {

  // ✅ PASSWORD VALIDATION (on blur)
  const passwordField = "#password";
  const confirmField = "#Confirm";

  $(passwordField).on("blur", function () {
    const $this = $(this);
    const value = $this.val().trim();
    const errorSpan = $this.next("span");
    errorSpan.text("");

    const passwordPattern =
      /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?#&_])[A-Za-z\d@$!%*?#&_]{8,}$/;

    if (value === "") {
      errorSpan.text("*Password is required!").css("color", "red");
      $this.css("border", "1px solid red");
    } else if (!passwordPattern.test(value)) {
      errorSpan
        .html(
          "*Password must have:<br>- At least 8 characters<br>- One uppercase letter<br>- One lowercase letter<br>- One number<br>- One special character"
        )
        .css("color", "red");
      $this.css("border", "1px solid red");
    } else {
      errorSpan.text("Looks good ✓").css("color", "limegreen");
      $this.css("border", "1px solid green");
    }
  });

  // ✅ Confirm password check
  $(confirmField).on("blur", function () {
    const confirm = $(this).val().trim();
    const password = $(passwordField).val().trim();
    const errorSpan = $(this).next("span");
    errorSpan.text("");

    if (confirm === "") {
      errorSpan.text("*Please confirm your password!").css("color", "red");
      $(this).css("border", "1px solid red");
    } else if (confirm !== password) {
      errorSpan.text("*Passwords do not match!").css("color", "red");
      $(this).css("border", "1px solid red");
    } else {
      errorSpan.text("Matched ✓").css("color", "limegreen");
      $(this).css("border", "1px solid green");
    }
  });

  $(passwordField + "," + confirmField).on("focus", function () {
    $(this).css("border", "1px solid black");
    $(this).next("span").text("");
  });

  // ✅ SIGNUP BUTTON AJAX
  $("#submit").on("click", function (e) {
    e.preventDefault();

    const name = $("#name").val().trim();
    const email = $("#email").val().trim();
    const password = $("#password").val().trim();
    const confirm = $("#Confirm").val().trim();
    const terms = $("#terms").is(":checked");

    const emailPattern =
      /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;

    if (!name || !email || !password || !confirm) {
      Swal.fire("Missing Fields", "All fields are required!", "warning");
      return;
    }
    if (!emailPattern.test(email)) {
      Swal.fire("Invalid Email", "Please enter a valid email address.", "error");
      return;
    }
    if (password.length < 8) {
      Swal.fire(
        "Weak Password",
        "Password must be at least 8 characters long.",
        "error"
      );
      return;
    }
    if (password !== confirm) {
      Swal.fire("Mismatch", "Passwords do not match!", "error");
      return;
    }
    if (!terms) {
      Swal.fire("Terms Required", "You must agree to the Terms & Conditions.", "warning");
      return;
    }

    // ✅ AJAX to Python backend
    $.ajax({
      url: "signup.py",
      method: "POST",
      data: { name, email, password },
      success: function (res) {
        console.log("Server:", res);

        if (res.includes("redirect") || res.trim() === "1") {
          // ✅ Store user data in localStorage (important)
          localStorage.setItem("userProfile", JSON.stringify({ name, email }));

          Swal.fire({
            icon: "success",
            title: "Sign-up Successful!",
            text: "Redirecting to your profile...",
            showConfirmButton: false,
            timer: 2000,
          });

          setTimeout(() => {
            window.location.href = "profile.html";
          }, 2000);
        } else if (res.includes("exists")) {
          Swal.fire("Oops!", "This email is already registered!", "error");
        } else {
          Swal.fire("Error", res, "error");
        }
      },
      error: function () {
        Swal.fire("Server Error", "Backend not responding!", "error");
      },
    });
  });
});
</script>


  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</body>

</html>